dist: trusty
sudo: required

language: go

go:
  - 1.8.x
  - tip

go_import_path: github.com/containerd/containerd

addons:
  apt:
    packages:
      - apparmor
      - libapparmor-dev
      - curl

env:
  # Runc is built from the 17.06 branch in https://github.com/docker/runc
  # when updating, also update the Dockerfile and hack/vendor.sh accordingly
  - SECCOMP_VERSION=2.3.1 RUNC_COMMIT=519d2ac975245b241773455f43db39bf6b8f40c8


install:
  - hack/install-seccomp.sh
  - hack/install-runc.sh
  - go get -u github.com/golang/lint/golint

script:
  - make all
  - sudo make install
  - sudo -E env "PATH=$PATH" "GOPATH=$GOPATH" make test
  - sudo -E env "PATH=$PATH" "GOPATH=$GOPATH" make integration-test
